<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.example.jhta_2402_2_final.dao.distribution.KitOrderProcessDao">
    <select id="findAllOrder" resultType="Map">
        SELECT
            KO.KIT_ORDER_ID AS 'kitOrderID',
                KC.NAME AS 'kitCompanyName',
                M.NAME AS 'kitName',
                M.PRICE AS 'kitPrice',
                KO.QUANTITY AS 'quantity',
                KO.QUANTITY * M.PRICE AS 'totalPrice',
                KO.PRODUCT_ORDER_DATE AS 'kitOrderDate',
                S.STATUS AS 'status'
        FROM
            KIT_ORDER KO
                JOIN
            KIT_COMPANY KC ON KO.KIT_COMPANY_ID = KC.KIT_COMPANY_ID
                JOIN
            MEALKIT M ON KO.MEALKIT_ID = M.MEALKIT_ID
                JOIN
            STATUS S ON KO.STATUS_ID = S.STATUS_ID;
    </select>

    <select id="findKitSource" resultType="Map">
        SELECT
            S.NAME AS 재료이름,
            SP.PRICE AS 재료가격,
            KSP.QUANTITY AS 수량
        FROM
            MEALKIT MK
                JOIN
            KIT_SOURCE_PRICE KSP ON MK.MEALKIT_ID = KSP.MEALKIT_ID
                JOIN
            SOURCE_PRICE SP ON KSP.SOURCE_PRICE_ID = SP.SOURCE_PRICE_ID
                JOIN
            SOURCE S ON SP.SOURCE_ID = S.SOURCE_ID
        WHERE
            MK.NAME = '비빔밥 밀키트';
    </select>

</mapper>