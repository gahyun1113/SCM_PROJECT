<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>회원가입</title>
    <link rel="stylesheet" href="" th:href="@{/css/common.css}">
</head>
<body>
<h1>회원가입</h1>
<form id="signupForm" method="post" action="/member/signin" th:action="@{/member/signin}">
    아이디<input type="text" id="userId" name="userId" placeholder="아이디 입력">
    <button type="button" onclick="checkUserId()">아이디 중복 검사</button>
    <div id="checkResult"></div>
    패스워드<input type="password" id="userPassword" name="userPassword">
    이름<input type="text" id="userName" name="userName">
    이메일<input type="email" id="userEmail" name="userEmail">
    <br>
    역할:
    <select id="role" name="role" required>
        <option value="">선택하세요</option>
        <option value="ROLE_USER">사용자</option>
        <option value="ROLE_ADMIN">관리자</option>
        <option value="ROLE_MANAGER">매니저</option>
    </select>
    <br>
    <button id="signUpButton" type="submit">회원가입</button>
</form>
</body>
<!--<script>-->
<!--    let isUserIdValid = false; // 아이디 중복 검사 결과를 저장할 변수-->

<!--    function checkUserId() {-->
<!--        var userId = document.getElementById("userId").value;-->
<!--        fetch(`/member/checkUserId?userId=${userId}`)-->
<!--            .then(response => {-->
<!--                if (!response.ok) {-->
<!--                    throw new Error(`HTTP error! status: ${response.status}`);-->
<!--                }-->
<!--                return response.text(); // 응답을 텍스트로 읽어들입니다-->
<!--            })-->
<!--            .then(text => {-->
<!--                try {-->
<!--                    const isAvailable = JSON.parse(text); // 텍스트를 JSON으로 변환-->
<!--                    const resultElement = document.getElementById("checkResult");-->

<!--                    if (isAvailable) {-->
<!--                        resultElement.innerText = "사용 가능한 아이디입니다.";-->
<!--                        isUserIdValid = true; // 아이디 유효성 검증 완료-->
<!--                    } else {-->
<!--                        resultElement.innerText = "아이디가 이미 사용 중입니다.";-->
<!--                        isUserIdValid = false; // 아이디 중복-->
<!--                    }-->
<!--                } catch (e) {-->
<!--                    console.error('Parsing error:', e);-->
<!--                    document.getElementById("checkResult").innerText = "아이디 중복 검사 중 오류가 발생했습니다.";-->
<!--                    isUserIdValid = false; // 아이디 중복 검사 오류-->
<!--                }-->
<!--            })-->
<!--            .catch(error => {-->
<!--                console.error('Error:', error);-->
<!--                document.getElementById("checkResult").innerText = "아이디 중복 검사 중 오류가 발생했습니다.";-->
<!--                isUserIdValid = false; // 아이디 중복 검사 오류-->
<!--            });-->
<!--    }-->

<!--    document.getElementById("signupForm").addEventListener("submit", function(event) {-->
<!--        const userId = document.getElementById("userId").value;-->
<!--        const userPassword = document.getElementById("userPassword").value;-->
<!--        const userName = document.getElementById("userName").value;-->
<!--        const userEmail = document.getElementById("userEmail").value;-->
<!--        const role = document.getElementById("role").value;-->

<!--        if (!isUserIdValid) {-->
<!--            alert("아이디 중복 검사를 먼저 진행해 주세요.");-->
<!--            event.preventDefault(); // 폼 제출 방지-->
<!--            return;-->
<!--        }-->

<!--        // 필수 입력 필드 확인-->
<!--        if (!userId || !userPassword || !userName || !userEmail || !role) {-->
<!--            alert("모든 필수 입력 필드를 채워주세요.");-->
<!--            event.preventDefault(); // 폼 제출 방지-->
<!--            highlightEmptyFields(); // 빈 필드 강조-->
<!--            return;-->
<!--        }-->
<!--    });-->

<!--    function highlightEmptyFields() {-->
<!--        const fields = ["userId", "userPassword", "userName", "userEmail", "role"];-->
<!--        fields.forEach(id => {-->
<!--            const field = document.getElementById(id);-->
<!--            if (!field.value) {-->
<!--                field.style.border = "2px solid red"; // 빈 필드에 빨간색 테두리 추가-->
<!--            } else {-->
<!--                field.style.border = ""; // 입력된 필드는 기본 테두리로 복구-->
<!--            }-->
<!--        });-->
<!--    }-->
<!--</script>-->
</html>
