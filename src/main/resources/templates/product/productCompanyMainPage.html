<!DOCTYPE html>
<html lang="en">
<head th:replace="~{fragment/head}">
<body class="sb-nav-fixed">
<nav th:replace="~{fragment/userHeader}"></nav>
<div id="layoutSidenav">
    <div id="layoutSidenav_content_user">
        <main>
            <div class="container-fluid px-4">
                <h1 class="mt-4">생산 업무 페이지</h1>
                <ol class="breadcrumb mb-4">
                    <!--                    <li class="breadcrumb-item active">Dashboard</li>-->
                </ol>
                <div class="row">
                    <div class="col-xl-6">
                        <div class="card mb-4">
                            <div class="card-header">
                                <i class="fas fa-chart-bar me-1"></i>
                                재고 현황 차트
                            </div>
                            <div class="card-body">
                                <canvas id="salesProductPriceChart" width="100%" height="100%"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-6">
                        <div class="card mb-4">
                            <div class="card-header">
                                <i class="fas fa-chart-area me-1"></i>
                                생산 주문 요청 차트
                            </div>
                            <div class="card-body">
                                <canvas id="salesProductChart" width="100%" height="100%"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card mb-4">
                    <div class="card-header">
                        <i class="fas fa-table me-1"></i>
                        <button class="btn btn-secondary dropdown-toggle ms-2" type="button" id="viewListDropDown" data-bs-toggle="dropdown" aria-expanded="false">
                            생산 현황
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="viewListDropDown">
                            <li><a class="dropdown-item" data-value="companySourceList">생산 현황 </a></li>
                            <li><a class="dropdown-item" data-value="warehouseList">창고 현황 </a></li>
                            <li><a class="dropdown-item" data-value="orderList">주문 현황 </a></li>
                        </ul>
                    </div>
                    <div class="card-body">
                        <div id="companySourceTableContainer">
                            <table id="companySourceTable" class="table table-bordered">
                                <thead>
                                <tr>
                                    <th>등록 번호</th>
                                    <th>생산품명</th>
                                    <th>생산품가격</th>
                                    <th>현재 창고 재고량</th>
                                    <th>생산</th>
                                </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                            <div class="d-flex justify-content-end">
                                <button type="button" class="btn btn-primary me-2 mx-2" data-bs-toggle="modal"
                                        data-bs-target="#addSourceModal">생산품목 등록
                                </button>
                            </div>
                        </div>

                        <div id="warehouseTableContainer" style="display:none;">
                            <table id="warehouseTable" class="table table-bordered">
                                <thead>
                                <tr>
                                    <th>생산번호</th>
                                    <th>생산품명</th>
                                    <th>생산량</th>
                                    <th>생산일자</th>
                                </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>

                        <div id="orderTableContainer" style="display:none;">
                            <table id="orderTable" class="table table-bordered">
                                <thead>
                                <tr>
                                    <th>주문번호</th>
                                    <th>주문한 재료</th>
                                    <th>재료 가격</th>
                                    <th>주문한 갯수</th>
                                    <th>총 주문 가격</th>
                                    <th>주문 일자</th>
                                    <th>주문 상태</th>
                                    <th>주문처리</th>
                                </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>

                        <!-- 업데이트(update) 모달 -->
                        <div class="modal fade" id="updateSourceModal" tabindex="-1" aria-labelledby="updateSourceModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h1 class="modal-title fs-5" id="updateSourceModalLabel">가격 수정</h1>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <form id="updateSourceForm">
                                            <div class="container">
                                                <div class="mb-3 row align-items-center">
                                                    <label class="col-sm-3 col-form-label">생산품명</label>
                                                    <div class="col-sm-9">
                                                        <input type="text" class="form-control" id="updateSourceName" disabled>
                                                    </div>
                                                </div>
                                                <div class="mb-3 row align-items-center">
                                                    <label class="col-sm-3 col-form-label">가격</label>
                                                    <div class="col-sm-9">
                                                        <div class="input-group">
                                                            <input type="number" id="updateSourcePrice" class="form-control" min="50" max="100000" value="50" step="50" required>
                                                            <span class="input-group-text">₩</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <input type="hidden" id="updateCompanySourceId" name="sourcePriceId">
                                            </div>
                                        </form>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
                                        <button type="button" class="btn btn-primary" id="updateSourceBtn">수정</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- 업데이트 모달 끝 -->


                        <!-- 생산(produce) 모달 -->
                        <div class="modal fade" id="produceSourceModal" tabindex="-1" aria-labelledby="produceSourceModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h1 class="modal-title fs-5" id="produceSourceModalLabel">생산</h1>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <form id="produceSourceForm">
                                            <div class="container">
                                                <div class="mb-3 row align-items-center">
                                                    <label class="col-sm-3 col-form-label">생산품명</label>
                                                    <div class="col-sm-9">
                                                        <input type="text" class="form-control" id="produceSourceName" disabled>
                                                    </div>
                                                </div>
                                                <div class="mb-3 row align-items-center">
                                                    <label class="col-sm-3 col-form-label">생산품가격</label>
                                                    <div class="col-sm-9">
                                                        <input type="text" class="form-control" id="produceSourcePrice" disabled>
                                                    </div>
                                                </div>
                                                <div class="mb-3 row align-items-center">
                                                    <label class="col-sm-3 col-form-label">갯수</label>
                                                    <div class="col-sm-9">
                                                        <input type="number" id="sourceQuantity" class="form-control"
                                                               min="1" max="50000" value="1" step="1">
                                                    </div>
                                                </div>
                                                <input type="hidden" id="sourcePriceId" name="sourcePriceId">
                                            </div>
                                        </form>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
                                        <button type="button" class="btn btn-primary" id="produceSourceBtn">생산</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- 생산 모달 끝 -->

                        <!-- 생산품 등록 모달 -->
                        <div class="modal fade" id="addSourceModal" tabindex="-1" aria-labelledby="addSourceModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h1 class="modal-title fs-5" id="addSourceModalLabel">생산품 등록</h1>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <form id="addSourceForm">
                                            <div class="container">
                                                <!-- 제품 선택 및 자동완성 -->
                                                <div class="mb-3 row align-items-center">
                                                    <label for="addSourceSelect" class="col-sm-3 col-form-label">제품</label>
                                                    <div class="col-sm-9">
                                                        <!-- 셀렉트 박스 -->
                                                        <select id="addSourceSelect" class="form-select addSource" name="sourceId">
                                                            <option value="directInput">직접입력</option>
                                                        </select>
                                                        <!-- 인풋 필드 -->
                                                        <input type="text" id="addSourceInput" class="form-control mt-2 addSource" placeholder="제품을 입력하세요">
                                                    </div>
                                                </div>

                                                <!-- 가격 입력 -->
                                                <div class="mb-3 row align-items-center">
                                                    <label for="sourcePrice" class="col-sm-3 col-form-label">가격</label>
                                                    <div class="col-sm-9">
                                                        <div class="input-group">
                                                            <input type="number" id="sourcePrice" class="form-control" min="50" max="100000" value="50" step="50" name="sourcePrice" required>
                                                            <span class="input-group-text">₩</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
                                        <button type="button" class="btn btn-primary" id="addSourceBtn">등록</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- 생산품 등록 모달 끝 -->

                        <!-- 주문 처리(orderProcess) 모달 -->
                        <div class="modal fade" id="orderProcessModal" tabindex="-1" aria-labelledby="orderProcessModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h1 class="modal-title fs-5" id="orderProcessModalLabel">생산</h1>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <form id="orderProcessForm">
                                            <div class="container">
                                                <input type="hidden" class="form-control" id="orderId" disabled>
                                                <input type="hidden" class="form-control" id="orderSourcePriceId" disabled>
                                                <div class="mb-3 row align-items-center">
                                                    <label class="col-sm-3 col-form-label">주문번호</label>
                                                    <div class="col-sm-9">
                                                        <input type="text" class="form-control" id="orderIdView" disabled>
                                                    </div>
                                                </div>
                                                <div class="mb-3 row align-items-center">
                                                    <label class="col-sm-3 col-form-label">주문한 재료</label>
                                                    <div class="col-sm-9">
                                                        <input type="text" class="form-control" id="orderSourceName" disabled>
                                                    </div>
                                                </div>
                                                <div class="mb-3 row align-items-center">
                                                    <label class="col-sm-3 col-form-label">재료 가격</label>
                                                    <div class="col-sm-9">
                                                        <input type="text" class="form-control" id="orderSourcePrice" disabled>
                                                    </div>
                                                </div>
                                                <div class="mb-3 row align-items-center">
                                                    <label class="col-sm-3 col-form-label">갯수</label>
                                                    <div class="col-sm-9">
                                                        <input type="text" class="form-control" id="orderQuantity" disabled>
                                                    </div>
                                                </div>
                                                <div class="mb-3 row align-items-center">
                                                    <label class="col-sm-3 col-form-label">총 주문 가격</label>
                                                    <div class="col-sm-9">
                                                        <input type="text" class="form-control" id="orderTotalPrice" disabled>
                                                    </div>
                                                </div>
                                                <div class="mb-3 row align-items-center">
                                                    <label class="col-sm-3 col-form-label">주문 일자</label>
                                                    <div class="col-sm-9">
                                                        <input type="text" class="form-control" id="orderDate" disabled>
                                                    </div>
                                                </div>
                                                <div class="mb-3 row align-items-center">
                                                    <label class="col-sm-3 col-form-label">창고 재고량</label>
                                                    <div class="col-sm-9">
                                                        <input type="text" class="form-control" id="test01" value="--현재 창고 재고량 나와야함 모자라면 발주 막기--" disabled>
                                                    </div>
                                                </div>
                                                <div class="mb-3 row align-items-center">
                                                    <label for="addSourceSelect" class="col-sm-3 col-form-label">제품</label>
                                                    <div class="col-sm-9">
                                                        <!-- 셀렉트 박스 -->
                                                        <select id="orderStatusSelect" class="form-select">
                                                            <option value="2">처리중</option>
                                                            <option value="4">취소</option>
                                                        </select>
                                                        <!-- 처리중 or 취소만 ? 일단 하드코딩 -->
                                                    </div>
                                                </div>

                                            </div>
                                        </form>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
                                        <button type="button" class="btn btn-primary" id="orderProcessBtn">확인</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- 주문 처리(orderProcess) 모달 끝 -->
                    </div>
                </div>
            </div>
        </main>
        <footer class="py-4 bg-light mt-auto">
            <div class="container-fluid px-4">
                <div class="d-flex align-items-center justify-content-between small">
                    <div class="text-muted">Copyright &copy; Your Website 2023</div>
                    <div>
                        <a href="#">Privacy Policy</a>
                        &middot;
                        <a href="#">Terms &amp; Conditions</a>
                    </div>
                </div>
            </div>
        </footer>
    </div>
</div>
</body>
<th:block th:replace="~{fragment/footer}"></th:block>
<script th:inline="javascript" th:src="@{/js/productCompany.js}"></script>
</html>